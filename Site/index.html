<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
    <title>A JSON Framework for Cocoa</title>
    <link rel="stylesheet" href="style.css" type="text/css" media="screen" />
</head>

<body>

<h1>JSON Objective-C Framework</h1>

<div id="toc">
<ul>
<li><a href="#usage">Basic usage</a></li>
<li><a href="#fragments">Working with JSON fragments</a></li>
<li><a href="#mappings">Mapping JSON types to Objective-C</a></li>
<li><a href="#limitations">Limitations</a></li>
<li><a href="#performance">Performance</a></li>
<li><a href="#resources">Resources</a></li>
<li><a href="#feedback">Feedback</a></li>
</ul>
</div>

<p>JSON (JavaScript Object Notation) is a lightweight data-interchange
format. This framework contains a collection of categories adding full
JSON support to existing Cocoa classes.</p>


<h2 id="usage">Basic usage</h2>

<p>Linking to the <a href="__DMGURL__">JSON</a> framework and
importing the <code>&lt;JSON/JSON.h&gt;</code> header provides the
following main methods:</p>

<dl>
<dt><pre>
-[NSArray JSON];
-[NSDictionary JSON];
</pre></dt>

<dd>Return NSStrings containing a JSON representation of the receiver.
(See <a href="#mappings">note</a> on mapping NSDictionary instances to
JSON objects.)</dd>

<dt><pre>
-[NSString objectFromJSON];
</pre></dt>

<dd>Decodes the JSON in the receiver and returns either an NSArray or
NSDictionary. Will throw an error if the receiver does not contain
valid JSON text.</dd>

</dl>


<h2 id="fragments">Working with JSON fragments</h2>

<p>Strictly speaking <strong>JSON must have exactly one top-level
container</strong>. (Either an array or an object.) Nulls, numbers,
booleans and strings cannot be represented in strict JSON on their
own. It can however be quite convenient to <em>pretend</em> that such
fragments are valid JSON. The following methods will let you do so:</p>

<dl>
<dt><pre>
-[NSNull JSONFragment];
-[NSNumber JSONFragment];
-[NSString JSONFragment];
</pre>
</dt>

<dd>Returns an NSString containing a JSON text fragment representating
the receiver. The method added to NSNumber will, if it holds a boolean
value, return the string "true" or "false". (See <a
href="#mappings">note</a>.)</dd>

<dt><pre>
-[NSString objectFromJSONFragment];
</pre></dt>

<dd>Returns an instance of NSArray, NSDictionary, NSNull, NSNumber or
NSString depending on the content of the string. </dd>

</dl>

<h2 id="mappings">Mapping between JSON and Objective-C types</h2>

<p>Here's how the distinct JSON types map to Objective-C types.</p>

<pre>
Object  <=> NSDictionary[1]
Array   <=> NSArray
String  <=> NSString
Null    <=> NSNull
Boolean <=> NSNumber[2]
Number  <=  NSNumber[3]
Number   => NSDecimalNumber[4]
</pre>

<ol>

<li>In JSON the keys of an object <strong>must</strong> be strings.
NSDictionary keys need not be, but attempting to convert an
NSDictionary with non-string keys into JSON will throw an
exception.</li>

<li>The JSON boolean "true" and "false" values are represented by
NSNumber instances created with the +numberWithBool: method.</li>

<li>Any NSNumber instance <strong>other than</strong> the previously
mentioned booleans will be converted to a JSON number the way you
would expect.</li>

<li>JSON numbers turn into NSDecimalNumber instances. (Because it was
simpler to implement the parser that way.)</li>

</ol>


<h2 id="limitations">Limitations</h2>

<p>As of version 0.1 this framework is limited to parsing strict JSON.
(Other than the above mentioned support for JSON fragments.) The
produced JSON is very terse, with no optional whitespace added. This
is planned for a future version.</p>


<h2 id="performance">A note on performance</h2>

<p>At the moment no work has gone into performance. <em>Correctness
first, speed later</em> has very much been the angle of attack. That
does not necessarily mean that the code is horribly slow, however. A
deeply nested 400k JSON file I had lying arond was parsed 10 times in
around 3 seconds. I don't really know how this measures up against
other implementations though.</p>


<h2 id="resources">Resources</h2>

<ul>
<li><a href="news.xml">News</a> (RSS).</li>
<li><a href="__DMGURL__">JSON embedded framework</a> disk image.</li>
<li>Subversion: <a href="http://svn.brautaset.org/JSON/trunk">http://svn.brautaset.org/JSON/trunk</a>.</li>
<li>Guide to <a href="http://blog.brautaset.org/2007/09/22/embedding-cocoa-frameworks/">embedding frameworks in Cocoa</a>.</li>
<li><a href="http://json.org/">Introducing JSON</a>.</li>
<li><a href="http://www.ietf.org/rfc/rfc4627.txt?number=4627">RFC4627</a>.</li>
</ul>


<h2 id="feedback">Feedback / praise / bug reports</h2>

<p>Email <a href="mailto:stig@brautaset.org">Stig Brautaset</a> please.</li>


<h2 id="apologies">Apologies</h2>

<p>This page is just about all the documentation that exists at the
moment. The code is pretty stable and well tested though.</p>

</body>
</html>
